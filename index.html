<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SECURE GUARD | 行動指揮中心</title>
    <!-- 核心渲染引擎 -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap');
        body { 
            font-family: 'Noto Sans TC', sans-serif; 
            background-color: #f8fafc; 
            color: #1e293b; 
            -webkit-tap-highlight-color: transparent; 
            margin: 0; 
            overflow-x: hidden; 
        }
        .sidebar-bg { background-color: #1a2233; }
        .active-item { background-color: #2563eb; color: white; }
        .status-card { background-color: #2d3748; }
        .safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
        input { border: 1px solid #e2e8f0; border-radius: 0.5rem; padding: 0.5rem 0.75rem; width: 100%; font-size: 0.875rem; background: white; }
        .sidebar-transition { transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        ::-webkit-scrollbar { width: 0; background: transparent; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- 內建戰術圖標 ---
        const Icon = ({ name, size = 20, className = "" }) => {
            const paths = {
                menu: "M3 12h18M3 6h18M3 18h18",
                close: "M18 6L6 18M6 6l12 12",
                shield: "M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",
                dashboard: "M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z M9 22V12h6v10",
                truck: "M1 3h15v13H1z M16 8h4l3 3v5h-7z M5 18a1 1 0 1 0 0-2 1 1 0 0 0 0 2z M18 18a1 1 0 1 0 0-2 1 1 0 0 0 0 2z",
                users: "M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2 M9 7a4 4 0 1 0 0-8 4 4 0 0 0 0 8z",
                patrol: "M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z M12 13a3 3 0 1 0 0-6 3 3 0 0 0 0 6z",
                paw: "M12 13c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z M8 10c-1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z M16 10c-1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z",
                flame: "M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",
                plus: "M12 5v14M5 12h14",
                pencil: "M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z",
                trash: "M3 6h18 M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",
                check: "M20 6L9 17l-5-5"
            };
            return (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <path d={paths[name] || ""}/>
                </svg>
            );
        };

        // --- K9 卡片 (含更名功能) ---
        const K9Card = ({ dog, onUpdateStatus, onUpdateName, onDelete }) => {
            const [isEditing, setIsEditing] = useState(false);
            const [editValue, setEditValue] = useState(dog.name);

            return (
                <div className="bg-white p-5 rounded-2xl border border-slate-100 shadow-sm relative">
                    <div className="absolute top-4 right-4 flex space-x-1">
                        <button onClick={() => setIsEditing(!isEditing)} className="p-1.5 text-slate-400">
                            <Icon name={isEditing ? "close" : "pencil"} size={14}/>
                        </button>
                        <button onClick={() => onDelete(dog.id)} className="p-1.5 text-slate-300 hover:text-red-500">
                            <Icon name="trash" size={14}/>
                        </button>
                    </div>
                    <div className="flex items-center space-x-4 mb-4">
                        <div className="w-12 h-12 rounded-xl bg-orange-50 flex items-center justify-center text-orange-500">
                            <Icon name="paw" size={24} />
                        </div>
                        <div className="flex-1">
                            {isEditing ? (
                                <div className="flex items-center space-x-2">
                                    <input value={editValue} onChange={(e)=>setEditValue(e.target.value)} className="!p-1" autoFocus />
                                    <button onClick={()=>{onUpdateName(dog.id, editValue); setIsEditing(false);}} className="p-1 bg-blue-600 text-white rounded-md"><Icon name="check" size={12}/></button>
                                </div>
                            ) : (
                                <h3 className="text-lg font-black text-slate-800 italic">{dog.name}</h3>
                            )}
                            <p className="text-[9px] text-slate-400 font-bold uppercase tracking-widest">K9 Member</p>
                        </div>
                    </div>
                    <div className="flex gap-2">
                        {['healthy', 'observation', 'sick'].map(s => (
                            <button 
                                key={s} 
                                onClick={() => onUpdateStatus(dog.id, s)}
                                className={`flex-1 py-2 rounded-xl text-[10px] font-black border transition-all ${dog.status === s ? 'bg-blue-600 text-white border-blue-600 shadow-md shadow-blue-100' : 'text-slate-400 border-slate-50'}`}
                            >
                                {s === 'healthy' ? '健康' : s === 'observation' ? '觀察' : '就醫'}
                            </button>
                        ))}
                    </div>
                </div>
            );
        };

        function App() {
            const [sidebarOpen, setSidebarOpen] = useState(false);
            const [tab, setTab] = useState('dashboard');
            const [time, setTime] = useState(new Date());
            const [isAdding, setIsAdding] = useState(false);
            const [editingLogId, setEditingLogId] = useState(null);
            const [editLogText, setEditLogText] = useState("");

            const [dogs, setDogs] = useState([{ id: 'D1', name: '柔', status: 'healthy' }, { id: 'D2', name: '歐告', status: 'observation' }]);
            const [logs, setLogs] = useState([{ id: 1, type: '訪客', info: '設備維護人員', time: '14:05' }]);

            useEffect(() => {
                const timer = setInterval(() => setTime(new Date()), 1000);
                return () => clearInterval(timer);
            }, []);

            const menuItems = [
                { id: 'dashboard', icon: 'dashboard', label: '監控儀表板' },
                { id: 'vehicles', icon: 'truck', label: '物流車輛登記' },
                { id: 'visitors', icon: 'users', label: '訪客管理' },
                { id: 'patrol', icon: 'patrol', label: '巡邏打卡' },
                { id: 'k9', icon: 'paw', label: 'K9 警衛犬專區' }
            ];

            return (
                <div className="min-h-screen flex flex-col relative bg-slate-50">
                    
                    {/* Header */}
                    <header className="bg-white p-4 shadow-sm flex items-center justify-between sticky top-0 z-40">
                        <button onClick={() => setSidebarOpen(true)} className="p-2 text-slate-600"><Icon name="menu" size={24} /></button>
                        <div className="flex items-center space-x-2">
                            <div className="p-1.5 bg-blue-600 rounded-lg text-white"><Icon name="shield" size={18}/></div>
                            <span className="font-black text-slate-800 tracking-tight uppercase">SECURE GUARD</span>
                        </div>
                        <div className="w-10"></div>
                    </header>

                    {/* Sidebar Drawer */}
                    <div className={`fixed inset-0 z-50 pointer-events-none ${sidebarOpen ? 'pointer-events-auto' : ''}`}>
                        <div className={`absolute inset-0 bg-black/60 transition-opacity duration-300 ${sidebarOpen ? 'opacity-100' : 'opacity-0'}`} onClick={() => setSidebarOpen(false)}></div>
                        <aside className={`absolute left-0 top-0 bottom-0 w-[280px] sidebar-bg sidebar-transition transform ${sidebarOpen ? 'translate-x-0' : '-translate-x-full'} flex flex-col`}>
                            <div className="p-6 flex items-center justify-between text-white">
                                <div className="flex items-center space-x-3"><Icon name="shield" size={24} className="text-blue-500"/><span className="text-xl font-black italic uppercase">SECUREGUARD</span></div>
                                <button onClick={() => setSidebarOpen(false)} className="p-2 text-slate-500"><Icon name="close" size={20}/></button>
                            </div>

                            <div className="px-5 mb-4">
                                <div className="status-card p-5 rounded-xl border border-white/5">
                                    <p className="text-[10px] font-bold text-slate-400 mb-1">系統時間</p>
                                    <p className="text-3xl font-black text-white font-mono leading-none mb-2">{time.toLocaleTimeString([], {hour12: false})}</p>
                                    <p className="text-[10px] text-slate-400 font-bold uppercase">{time.getFullYear()}年{time.getMonth() + 1}月{time.getDate()}日</p>
                                </div>
                            </div>

                            <div className="px-5 mb-8">
                                <div className="bg-green-500/10 border border-green-500/20 p-3 rounded-xl flex items-center space-x-3 text-green-500">
                                    <Icon name="flame" size={18}/><span className="text-sm font-bold">消防正常</span>
                                </div>
                            </div>

                            <nav className="flex-1 px-3 space-y-1">
                                {menuItems.map(item => (
                                    <button key={item.id} onClick={() => { setTab(item.id); setSidebarOpen(false); }} className={`w-full flex items-center space-x-4 p-4 rounded-xl font-bold text-sm ${tab === item.id ? 'active-item' : 'text-slate-400 hover:bg-white/5'}`}>
                                        <Icon name={item.icon} size={20} /><span>{item.label}</span>
                                    </button>
                                ))}
                            </nav>

                            <div className="p-6 border-t border-white/5 flex items-center space-x-4">
                                <div className="w-11 h-11 rounded-full bg-blue-600 flex items-center justify-center text-white font-black text-lg">黑</div>
                                <div><p className="text-sm font-black text-white">值班：小黑哥</p><p className="text-[10px] text-green-500 font-bold flex items-center gap-1.5 uppercase tracking-widest"><span className="w-1.5 h-1.5 bg-green-500 rounded-full"/> 執勤中</p></div>
                            </div>
                        </aside>
                    </div>

                    {/* Main Content */}
                    <main className="flex-1 p-5 safe-bottom">
                        {tab === 'dashboard' && (
                            <div className="space-y-6 animate-in fade-in">
                                <div className="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                                    <h2 className="text-xl font-black text-slate-800 mb-2">歡迎回來，小黑哥</h2>
                                    <p className="text-xs text-slate-500 font-medium italic">2/1 任務守護計畫執行中。</p>
                                </div>
                                <div className="grid grid-cols-2 gap-4 text-white">
                                    <div className="bg-blue-600 p-5 rounded-2xl shadow-lg shadow-blue-100">
                                        <p className="text-[10px] font-black uppercase opacity-70 mb-1">今日紀錄</p>
                                        <p className="text-3xl font-black italic">{logs.length}</p>
                                    </div>
                                    <div className="bg-slate-800 p-5 rounded-2xl shadow-lg shadow-slate-200">
                                        <p className="text-[10px] font-black uppercase opacity-70 mb-1">K9 成員</p>
                                        <p className="text-3xl font-black italic">{dogs.length}</p>
                                    </div>
                                </div>
                            </div>
                        )}

                        {tab === 'k9' && (
                            <div className="space-y-5 animate-in slide-in-from-bottom-4">
                                <div className="flex justify-between items-center"><h2 className="text-2xl font-black text-slate-800">K9 專區</h2><button onClick={()=>setIsAdding(true)} className="p-2.5 bg-blue-600 text-white rounded-xl"><Icon name="plus" size={20}/></button></div>
                                {isAdding && (
                                    <form onSubmit={(e)=>{e.preventDefault(); setDogs([{id:Date.now(), name:e.target.val.value, status:'healthy'}, ...dogs]); setIsAdding(false);}} className="bg-white p-6 rounded-2xl shadow-md border border-blue-100 space-y-4">
                                        <input name="val" required placeholder="狗狗名字..." autoFocus />
                                        <button className="w-full bg-blue-600 text-white py-3 rounded-xl font-black text-xs uppercase tracking-widest">確認加入</button>
                                    </form>
                                )}
                                <div className="space-y-4">
                                    {dogs.map(dog => (
                                        <K9Card key={dog.id} dog={dog} onUpdateName={(id,n)=>setDogs(dogs.map(d=>d.id===id ? {...d, name:n}:d))} onUpdateStatus={(id,s)=>setDogs(dogs.map(d=>d.id===id ? {...d, status:s}:d))} onDelete={(id)=>setDogs(dogs.filter(d=>d.id!==id))} />
                                    ))}
                                </div>
                            </div>
                        )}

                        {(tab === 'visitors' || tab === 'vehicles' || tab === 'patrol') && (
                            <div className="space-y-5 animate-in slide-in-from-right-4">
                                <div className="flex justify-between items-center"><h2 className="text-2xl font-black text-slate-800">{menuItems.find(m=>m.id===tab).label}</h2><button onClick={()=>setIsAdding(true)} className="p-2.5 bg-blue-600 text-white rounded-xl shadow-lg"><Icon name="plus" size={20}/></button></div>
                                {isAdding && (
                                    <form onSubmit={(e)=>{e.preventDefault(); setLogs([{id:Date.now(), type:'紀錄', info:e.target.val.value, time:time.toLocaleTimeString([],{hour12:false, hour:'2-digit', minute:'2-digit'})}, ...logs]); setIsAdding(false);}} className="bg-white p-6 rounded-2xl shadow-md space-y-4">
                                        <input name="val" required placeholder="登記內容..." autoFocus />
                                        <button className="w-full bg-blue-600 text-white py-3 rounded-xl font-black text-xs uppercase tracking-widest">完成登記</button>
                                    </form>
                                )}
                                <div className="bg-white rounded-2xl border border-slate-100 overflow-hidden shadow-sm">
                                    <table className="w-full text-left">
                                        <tbody className="divide-y divide-slate-100">
                                            {logs.map(v => (
                                                <tr key={v.id} className="hover:bg-slate-50 transition-colors">
                                                    <td className="px-5 py-5 text-[11px] font-bold text-blue-600 font-mono w-20">{v.time}</td>
                                                    <td className="px-5 py-5">
                                                        {editingLogId === v.id ? (
                                                            <div className="flex items-center space-x-2">
                                                                <input value={editLogText} onChange={(e)=>setEditLogText(e.target.value)} className="!p-1 !text-xs" autoFocus onKeyDown={(e)=>e.key==='Enter' && setEditingLogId(null)}/>
                                                                <button onClick={()=>{setLogs(logs.map(l=>l.id===v.id ? {...l, info:editLogText}:l)); setEditingLogId(null);}} className="text-blue-500"><Icon name="check" size={14}/></button>
                                                            </div>
                                                        ) : (
                                                            <span className="font-black text-slate-700 text-sm">{v.info}</span>
                                                        )}
                                                    </td>
                                                    <td className="px-5 py-5 text-right flex justify-end space-x-2">
                                                        <button onClick={()=>{setEditingLogId(v.id); setEditLogText(v.info);}} className="p-1 text-slate-300 hover:text-blue-400"><Icon name="pencil" size={14}/></button>
                                                        <button onClick={()=>setLogs(logs.filter(it=>it.id!==v.id))} className="p-1 text-slate-300 hover:text-red-500"><Icon name="trash" size={14}/></button>
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        )}
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html><!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SECURE GUARD | 行動指揮中心</title>
    <!-- 核心渲染引擎 -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap');
        body { 
            font-family: 'Noto Sans TC', sans-serif; 
            background-color: #f8fafc; 
            color: #1e293b; 
            -webkit-tap-highlight-color: transparent; 
            margin: 0; 
            overflow-x: hidden; 
        }
        .sidebar-bg { background-color: #1a2233; }
        .active-item { background-color: #2563eb; color: white; }
        .status-card { background-color: #2d3748; }
        .safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
        input { border: 1px solid #e2e8f0; border-radius: 0.5rem; padding: 0.5rem 0.75rem; width: 100%; font-size: 0.875rem; background: white; }
        .sidebar-transition { transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        ::-webkit-scrollbar { width: 0; background: transparent; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- 內建戰術圖標 ---
        const Icon = ({ name, size = 20, className = "" }) => {
            const paths = {
                menu: "M3 12h18M3 6h18M3 18h18",
                close: "M18 6L6 18M6 6l12 12",
                shield: "M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",
                dashboard: "M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z M9 22V12h6v10",
                truck: "M1 3h15v13H1z M16 8h4l3 3v5h-7z M5 18a1 1 0 1 0 0-2 1 1 0 0 0 0 2z M18 18a1 1 0 1 0 0-2 1 1 0 0 0 0 2z",
                users: "M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2 M9 7a4 4 0 1 0 0-8 4 4 0 0 0 0 8z",
                patrol: "M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z M12 13a3 3 0 1 0 0-6 3 3 0 0 0 0 6z",
                paw: "M12 13c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z M8 10c-1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z M16 10c-1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z",
                flame: "M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",
                plus: "M12 5v14M5 12h14",
                pencil: "M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z",
                trash: "M3 6h18 M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",
                check: "M20 6L9 17l-5-5"
            };
            return (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <path d={paths[name] || ""}/>
                </svg>
            );
        };

        // --- K9 卡片 (含更名功能) ---
        const K9Card = ({ dog, onUpdateStatus, onUpdateName, onDelete }) => {
            const [isEditing, setIsEditing] = useState(false);
            const [editValue, setEditValue] = useState(dog.name);

            return (
                <div className="bg-white p-5 rounded-2xl border border-slate-100 shadow-sm relative">
                    <div className="absolute top-4 right-4 flex space-x-1">
                        <button onClick={() => setIsEditing(!isEditing)} className="p-1.5 text-slate-400">
                            <Icon name={isEditing ? "close" : "pencil"} size={14}/>
                        </button>
                        <button onClick={() => onDelete(dog.id)} className="p-1.5 text-slate-300 hover:text-red-500">
                            <Icon name="trash" size={14}/>
                        </button>
                    </div>
                    <div className="flex items-center space-x-4 mb-4">
                        <div className="w-12 h-12 rounded-xl bg-orange-50 flex items-center justify-center text-orange-500">
                            <Icon name="paw" size={24} />
                        </div>
                        <div className="flex-1">
                            {isEditing ? (
                                <div className="flex items-center space-x-2">
                                    <input value={editValue} onChange={(e)=>setEditValue(e.target.value)} className="!p-1" autoFocus />
                                    <button onClick={()=>{onUpdateName(dog.id, editValue); setIsEditing(false);}} className="p-1 bg-blue-600 text-white rounded-md"><Icon name="check" size={12}/></button>
                                </div>
                            ) : (
                                <h3 className="text-lg font-black text-slate-800 italic">{dog.name}</h3>
                            )}
                            <p className="text-[9px] text-slate-400 font-bold uppercase tracking-widest">K9 Member</p>
                        </div>
                    </div>
                    <div className="flex gap-2">
                        {['healthy', 'observation', 'sick'].map(s => (
                            <button 
                                key={s} 
                                onClick={() => onUpdateStatus(dog.id, s)}
                                className={`flex-1 py-2 rounded-xl text-[10px] font-black border transition-all ${dog.status === s ? 'bg-blue-600 text-white border-blue-600 shadow-md shadow-blue-100' : 'text-slate-400 border-slate-50'}`}
                            >
                                {s === 'healthy' ? '健康' : s === 'observation' ? '觀察' : '就醫'}
                            </button>
                        ))}
                    </div>
                </div>
            );
        };

        function App() {
            const [sidebarOpen, setSidebarOpen] = useState(false);
            const [tab, setTab] = useState('dashboard');
            const [time, setTime] = useState(new Date());
            const [isAdding, setIsAdding] = useState(false);
            const [editingLogId, setEditingLogId] = useState(null);
            const [editLogText, setEditLogText] = useState("");

            const [dogs, setDogs] = useState([{ id: 'D1', name: '柔', status: 'healthy' }, { id: 'D2', name: '歐告', status: 'observation' }]);
            const [logs, setLogs] = useState([{ id: 1, type: '訪客', info: '設備維護人員', time: '14:05' }]);

            useEffect(() => {
                const timer = setInterval(() => setTime(new Date()), 1000);
                return () => clearInterval(timer);
            }, []);

            const menuItems = [
                { id: 'dashboard', icon: 'dashboard', label: '監控儀表板' },
                { id: 'vehicles', icon: 'truck', label: '物流車輛登記' },
                { id: 'visitors', icon: 'users', label: '訪客管理' },
                { id: 'patrol', icon: 'patrol', label: '巡邏打卡' },
                { id: 'k9', icon: 'paw', label: 'K9 警衛犬專區' }
            ];

            return (
                <div className="min-h-screen flex flex-col relative bg-slate-50">
                    
                    {/* Header */}
                    <header className="bg-white p-4 shadow-sm flex items-center justify-between sticky top-0 z-40">
                        <button onClick={() => setSidebarOpen(true)} className="p-2 text-slate-600"><Icon name="menu" size={24} /></button>
                        <div className="flex items-center space-x-2">
                            <div className="p-1.5 bg-blue-600 rounded-lg text-white"><Icon name="shield" size={18}/></div>
                            <span className="font-black text-slate-800 tracking-tight uppercase">SECURE GUARD</span>
                        </div>
                        <div className="w-10"></div>
                    </header>

                    {/* Sidebar Drawer */}
                    <div className={`fixed inset-0 z-50 pointer-events-none ${sidebarOpen ? 'pointer-events-auto' : ''}`}>
                        <div className={`absolute inset-0 bg-black/60 transition-opacity duration-300 ${sidebarOpen ? 'opacity-100' : 'opacity-0'}`} onClick={() => setSidebarOpen(false)}></div>
                        <aside className={`absolute left-0 top-0 bottom-0 w-[280px] sidebar-bg sidebar-transition transform ${sidebarOpen ? 'translate-x-0' : '-translate-x-full'} flex flex-col`}>
                            <div className="p-6 flex items-center justify-between text-white">
                                <div className="flex items-center space-x-3"><Icon name="shield" size={24} className="text-blue-500"/><span className="text-xl font-black italic uppercase">SECUREGUARD</span></div>
                                <button onClick={() => setSidebarOpen(false)} className="p-2 text-slate-500"><Icon name="close" size={20}/></button>
                            </div>

                            <div className="px-5 mb-4">
                                <div className="status-card p-5 rounded-xl border border-white/5">
                                    <p className="text-[10px] font-bold text-slate-400 mb-1">系統時間</p>
                                    <p className="text-3xl font-black text-white font-mono leading-none mb-2">{time.toLocaleTimeString([], {hour12: false})}</p>
                                    <p className="text-[10px] text-slate-400 font-bold uppercase">{time.getFullYear()}年{time.getMonth() + 1}月{time.getDate()}日</p>
                                </div>
                            </div>

                            <div className="px-5 mb-8">
                                <div className="bg-green-500/10 border border-green-500/20 p-3 rounded-xl flex items-center space-x-3 text-green-500">
                                    <Icon name="flame" size={18}/><span className="text-sm font-bold">消防正常</span>
                                </div>
                            </div>

                            <nav className="flex-1 px-3 space-y-1">
                                {menuItems.map(item => (
                                    <button key={item.id} onClick={() => { setTab(item.id); setSidebarOpen(false); }} className={`w-full flex items-center space-x-4 p-4 rounded-xl font-bold text-sm ${tab === item.id ? 'active-item' : 'text-slate-400 hover:bg-white/5'}`}>
                                        <Icon name={item.icon} size={20} /><span>{item.label}</span>
                                    </button>
                                ))}
                            </nav>

                            <div className="p-6 border-t border-white/5 flex items-center space-x-4">
                                <div className="w-11 h-11 rounded-full bg-blue-600 flex items-center justify-center text-white font-black text-lg">黑</div>
                                <div><p className="text-sm font-black text-white">值班：小黑哥</p><p className="text-[10px] text-green-500 font-bold flex items-center gap-1.5 uppercase tracking-widest"><span className="w-1.5 h-1.5 bg-green-500 rounded-full"/> 執勤中</p></div>
                            </div>
                        </aside>
                    </div>

                    {/* Main Content */}
                    <main className="flex-1 p-5 safe-bottom">
                        {tab === 'dashboard' && (
                            <div className="space-y-6 animate-in fade-in">
                                <div className="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                                    <h2 className="text-xl font-black text-slate-800 mb-2">歡迎回來，小黑哥</h2>
                                    <p className="text-xs text-slate-500 font-medium italic">2/1 任務守護計畫執行中。</p>
                                </div>
                                <div className="grid grid-cols-2 gap-4 text-white">
                                    <div className="bg-blue-600 p-5 rounded-2xl shadow-lg shadow-blue-100">
                                        <p className="text-[10px] font-black uppercase opacity-70 mb-1">今日紀錄</p>
                                        <p className="text-3xl font-black italic">{logs.length}</p>
                                    </div>
                                    <div className="bg-slate-800 p-5 rounded-2xl shadow-lg shadow-slate-200">
                                        <p className="text-[10px] font-black uppercase opacity-70 mb-1">K9 成員</p>
                                        <p className="text-3xl font-black italic">{dogs.length}</p>
                                    </div>
                                </div>
                            </div>
                        )}

                        {tab === 'k9' && (
                            <div className="space-y-5 animate-in slide-in-from-bottom-4">
                                <div className="flex justify-between items-center"><h2 className="text-2xl font-black text-slate-800">K9 專區</h2><button onClick={()=>setIsAdding(true)} className="p-2.5 bg-blue-600 text-white rounded-xl"><Icon name="plus" size={20}/></button></div>
                                {isAdding && (
                                    <form onSubmit={(e)=>{e.preventDefault(); setDogs([{id:Date.now(), name:e.target.val.value, status:'healthy'}, ...dogs]); setIsAdding(false);}} className="bg-white p-6 rounded-2xl shadow-md border border-blue-100 space-y-4">
                                        <input name="val" required placeholder="狗狗名字..." autoFocus />
                                        <button className="w-full bg-blue-600 text-white py-3 rounded-xl font-black text-xs uppercase tracking-widest">確認加入</button>
                                    </form>
                                )}
                                <div className="space-y-4">
                                    {dogs.map(dog => (
                                        <K9Card key={dog.id} dog={dog} onUpdateName={(id,n)=>setDogs(dogs.map(d=>d.id===id ? {...d, name:n}:d))} onUpdateStatus={(id,s)=>setDogs(dogs.map(d=>d.id===id ? {...d, status:s}:d))} onDelete={(id)=>setDogs(dogs.filter(d=>d.id!==id))} />
                                    ))}
                                </div>
                            </div>
                        )}

                        {(tab === 'visitors' || tab === 'vehicles' || tab === 'patrol') && (
                            <div className="space-y-5 animate-in slide-in-from-right-4">
                                <div className="flex justify-between items-center"><h2 className="text-2xl font-black text-slate-800">{menuItems.find(m=>m.id===tab).label}</h2><button onClick={()=>setIsAdding(true)} className="p-2.5 bg-blue-600 text-white rounded-xl shadow-lg"><Icon name="plus" size={20}/></button></div>
                                {isAdding && (
                                    <form onSubmit={(e)=>{e.preventDefault(); setLogs([{id:Date.now(), type:'紀錄', info:e.target.val.value, time:time.toLocaleTimeString([],{hour12:false, hour:'2-digit', minute:'2-digit'})}, ...logs]); setIsAdding(false);}} className="bg-white p-6 rounded-2xl shadow-md space-y-4">
                                        <input name="val" required placeholder="登記內容..." autoFocus />
                                        <button className="w-full bg-blue-600 text-white py-3 rounded-xl font-black text-xs uppercase tracking-widest">完成登記</button>
                                    </form>
                                )}
                                <div className="bg-white rounded-2xl border border-slate-100 overflow-hidden shadow-sm">
                                    <table className="w-full text-left">
                                        <tbody className="divide-y divide-slate-100">
                                            {logs.map(v => (
                                                <tr key={v.id} className="hover:bg-slate-50 transition-colors">
                                                    <td className="px-5 py-5 text-[11px] font-bold text-blue-600 font-mono w-20">{v.time}</td>
                                                    <td className="px-5 py-5">
                                                        {editingLogId === v.id ? (
                                                            <div className="flex items-center space-x-2">
                                                                <input value={editLogText} onChange={(e)=>setEditLogText(e.target.value)} className="!p-1 !text-xs" autoFocus onKeyDown={(e)=>e.key==='Enter' && setEditingLogId(null)}/>
                                                                <button onClick={()=>{setLogs(logs.map(l=>l.id===v.id ? {...l, info:editLogText}:l)); setEditingLogId(null);}} className="text-blue-500"><Icon name="check" size={14}/></button>
                                                            </div>
                                                        ) : (
                                                            <span className="font-black text-slate-700 text-sm">{v.info}</span>
                                                        )}
                                                    </td>
                                                    <td className="px-5 py-5 text-right flex justify-end space-x-2">
                                                        <button onClick={()=>{setEditingLogId(v.id); setEditLogText(v.info);}} className="p-1 text-slate-300 hover:text-blue-400"><Icon name="pencil" size={14}/></button>
                                                        <button onClick={()=>setLogs(logs.filter(it=>it.id!==v.id))} className="p-1 text-slate-300 hover:text-red-500"><Icon name="trash" size={14}/></button>
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        )}
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html><!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>System Guard v1.0 | 小黑哥指揮中心</title>
    <!-- 引入 React 與 Tailwind 的引擎 (精簡穩定版) -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #0a0a0c; color: #cbd5e1; -webkit-tap-highlight-color: transparent; margin: 0; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.08); }
        .neon-blue { box-shadow: 0 0 20px rgba(37, 99, 235, 0.2); }
        .safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // 內建戰術圖標 (SVG 格式，保證不報錯)
        const Icon = ({ name, size = 20, className = "" }) => {
            const paths = {
                shield: "M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",
                paw: "M12 13c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm-4.2-2.5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm8.4 0c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5z",
                users: "M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2 M9 7a4 4 0 1 0 0-8 4 4 0 0 0 0 8z",
                plus: "M12 5v14M5 12h14",
                check: "M20 6L9 17l-5-5",
                pencil: "M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z",
                trash: "M3 6h18 M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",
                target: "M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z M12 16a4 4 0 1 0 0-8 4 4 0 0 0 0 8z",
                truck: "M1 3h15v13H1z M16 8h4l3 3v5h-7z"
            };
            return (
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <path d={paths[name] || ""}/>
                </svg>
            );
        };

        function App() {
            const [tab, setTab] = useState('mission');
            const [currentTime, setCurrentTime] = useState(new Date());
            const [isAdding, setIsAdding] = useState(false);
            const [dogs, setDogs] = useState([
                { id: 1, name: '柔', breed: '台灣犬', status: 'healthy' },
                { id: 2, name: '歐告', breed: '黑犬', status: 'observation' }
            ]);

            useEffect(() => {
                const timer = setInterval(() => setCurrentTime(new Date()), 1000);
                return () => clearInterval(timer);
            }, []);

            return (
                <div className="min-h-screen flex flex-col safe-bottom">
                    <header className="p-6 border-b border-white/5 glass sticky top-0 z-50 flex justify-between items-center">
                        <div className="flex items-center space-x-3">
                            <div className="p-2 bg-blue-600 rounded-2xl neon-blue"><Icon name="shield" size={24} className="text-white"/></div>
                            <div>
                                <h1 className="text-xl font-black italic text-white tracking-tighter leading-none uppercase">SYSTEM GUARD</h1>
                                <p className="text-[10px] text-blue-500 font-bold uppercase tracking-widest mt-1">Ready for 2/1</p>
                            </div>
                        </div>
                        <div className="text-right font-mono text-blue-400 font-bold text-sm">
                            {currentTime.toLocaleTimeString([], {hour12:false})}
                        </div>
                    </header>

                    <main className="flex-1 p-6 space-y-8">
                        {tab === 'mission' && (
                            <div className="space-y-6 animate-in fade-in">
                                <div className="p-10 rounded-[3rem] glass bg-gradient-to-br from-blue-900/20 to-transparent relative overflow-hidden">
                                    <h2 className="text-3xl font-black italic text-white">指揮中心啟動</h2>
                                    <div className="mt-8 flex items-center space-x-5">
                                        <div className="w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center font-black text-white shadow-xl">黑</div>
                                        <div className="w-12 h-12 rounded-full bg-indigo-600 flex items-center justify-center font-black text-white shadow-xl text-xs">2/1</div>
                                        <span className="text-[11px] font-black text-blue-500 uppercase tracking-widest animate-pulse">● 守護計畫執行中</span>
                                    </div>
                                </div>
                                <div className="p-8 rounded-[2.5rem] glass border-white/5">
                                    <p className="text-[10px] font-black text-slate-500 uppercase tracking-widest mb-2">守護戰力</p>
                                    <div className="text-4xl font-black text-white italic">{dogs.length} <span className="text-xs font-bold text-slate-600 uppercase tracking-widest">K9 Members</span></div>
                                </div>
                            </div>
                        )}

                        {tab === 'k9' && (
                            <div className="space-y-6">
                                <div className="flex justify-between items-end">
                                    <h2 className="text-3xl font-black italic text-white">K9 戰術專區</h2>
                                    <button onClick={()=>setIsAdding(true)} className="p-3 bg-blue-600 text-white rounded-2xl shadow-xl active:scale-90"><Icon name="plus" size={24}/></button>
                                </div>
                                {isAdding && (
                                    <form onSubmit={(e)=>{e.preventDefault(); setDogs([...dogs, {id:Date.now(), name:e.target.entry.value, status:'healthy'}]); setIsAdding(false);}} className="p-8 glass rounded-[3rem] space-y-4 border-blue-500/30">
                                        <input name="entry" required placeholder="輸入狗狗名字..." className="w-full p-4 bg-black/60 rounded-2xl border-white/10 text-white font-bold outline-none" autoFocus />
                                        <button className="w-full bg-blue-600 text-white py-4 rounded-2xl font-black text-xs tracking-widest uppercase">確認加入</button>
                                    </form>
                                )}
                                <div className="grid grid-cols-1 gap-4">
                                    {dogs.map(dog => (
                                        <div key={dog.id} className="p-6 rounded-[2rem] glass flex items-center justify-between transition-all">
                                            <div className="flex items-center space-x-4">
                                                <div className="w-12 h-12 rounded-xl bg-orange-500/20 flex items-center justify-center text-orange-500"><Icon name="paw" size={24} /></div>
                                                <div>
                                                    <h3 className="text-xl font-black text-white italic">{dog.name}</h3>
                                                    <p className="text-[10px] text-slate-500 font-bold uppercase">{dog.status}</p>
                                                </div>
                                            </div>
                                            <div className="flex gap-2">
                                                {['healthy','observation','sick'].map(s=>(
                                                    <button key={s} onClick={()=>setDogs(dogs.map(d=>d.id===dog.id?{...d,status:s}:d))} className={`w-3 h-3 rounded-full ${dog.status===s?'bg-white':'bg-white/10'}`}/>
                                                ))}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {(tab === 'visitors' || tab === 'vehicles') && (
                            <div className="p-12 text-center glass rounded-[3rem]">
                                <Icon name="shield" size={48} className="mx-auto text-slate-800 mb-4" />
                                <p className="text-slate-500 font-black italic tracking-widest text-sm uppercase">智慧安防流程 v1.0 運作中</p>
                            </div>
                        )}
                    </main>

                    <nav className="fixed bottom-0 left-0 right-0 p-5 pb-10 glass border-t border-white/10 flex justify-around items-center z-50">
                        <button onClick={() => setTab('mission')} className={`p-4 rounded-2xl ${tab === 'mission' ? 'text-blue-500 bg-blue-500/10 shadow-lg' : 'text-slate-500'}`}><Icon name="shield" size={24}/></button>
                        <button onClick={() => setTab('k9')} className={`p-4 rounded-2xl ${tab === 'k9' ? 'text-orange-500 bg-orange-500/10 shadow-lg' : 'text-slate-500'}`}><Icon name="paw" size={24}/></button>
                        <button onClick={()=>setIsAdding(true)} className="w-16 h-16 bg-blue-600 text-white rounded-full flex items-center justify-center shadow-2xl shadow-blue-900/40 -mt-16 border-[6px] border-[#0a0a0c] active:scale-90 transition-all"><Icon name="plus" size={28}/></button>
                        <button onClick={() => setTab('visitors')} className={`p-4 rounded-2xl ${tab === 'visitors' ? 'text-blue-500 bg-blue-500/10' : 'text-slate-500'}`}><Icon name="users" size={24}/></button>
                        <button onClick={() => setTab('vehicles')} className={`p-4 rounded-2xl ${tab === 'vehicles' ? 'text-purple-500 bg-purple-500/10' : 'text-slate-500'}`}><Icon name="truck" size={24}/></button>
                    </nav>
                </div>
            );
        }
        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
